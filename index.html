<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto Option Strategy Builder</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@1.0.2"></script>
</head>
<body>
    <header>
        <nav>
            <button id="nav-home" class="nav-button active">Home</button>
            <button id="nav-builder" class="nav-button">Strategy Builder</button>
            <button id="nav-advanced-strategies" class="nav-button">Advanced Strategies</button>
        </nav>
    </header>

    <div id="home-section" class="content-section active">
        <div class="home-content">
            <h2>Welcome to the Crypto Option Strategy Builder!</h2>
            <p>This tool helps you visualize various cryptocurrency option and future strategies, understand their potential profit/loss, and analyze risk/reward profiles.</p>
            <p><strong>Features:</strong></p>
            <ul>
                <li>Build custom strategies with multiple option and future legs.</li>
                <li>Visualize payoff charts.</li>
                <li>Calculate Max Profit, Max Loss, Break-even Point(s), and Risk/Reward.</li>
                <li>Explore pre-built common option strategies (directional).</li>
                <li>(New!) Explore advanced non-directional strategies.</li>
                <li>See 1 Standard Deviation (1SD) and 2 Standard Deviation (2SD) price ranges on the chart.</li>
                <li>Interactive price slider to explore P&L at any point on the chart.</li>
            </ul>
            <p>Click "Strategy Builder" to start creating and analyzing your strategies, or "Advanced Strategies" to explore complex non-directional setups.</p>
        </div>
    </div>

    <div id="builder-section" class="content-section">
        <div class="main-wrapper">
            <div class="prebuilt-strategies-sidebar">
                <h2>Directional Strategies</h2>
                <ul id="strategy-list">
                    </ul>
            </div>

            <div class="container">
                <h1>Crypto Option Strategy Builder</h1>

                <div class="results">
                    <h2>Strategy Payoff</h2>
                    <canvas id="payoffChart"></canvas>
                    <div id="metrics">
                        <p>Max Profit: <span id="max-profit">-</span></p>
                        <p>Max Loss: <span id="max-loss">-</span></p>
                        <p>Break-even Point(s): <span id="breakeven-points">-</span></p>
                        <p>Risk/Reward Ratio: <span id="risk-reward">-</span></p>
                    </div>

                    <div class="price-slider-section">
                        <h3>Explore Payoff at Price: <span id="slider-price-display">0</span></h3>
                        <input type="range" id="price-slider" min="0" max="100" value="50" step="1">
                        <p>P&L at selected price: <span id="slider-current-pl">-</span></p>
                    </div>
                </div>

                <div id="strategy-legs">
                    <h2>Current Strategy Legs</h2>
                    </div>

                <div class="inputs-bottom-section">
                    <label for="underlying-price">Underlying Asset Price:</label>
                    <input type="number" id="underlying-price" value="30000" step="100" required>
                    <br>
                    <label for="dte">Days to Expiration (DTE):</label>
                    <input type="number" id="dte" value="30" min="1" required>
                    <br>
                    <button id="add-leg">Add Another Leg</button>
                    <button id="calculate-strategy">Calculate Strategy</button>
                    <button id="clear-legs">Clear All Legs</button>
                </div>

            </div>
        </div>
    </div>

    <div id="advanced-strategies-section" class="content-section">
        <div class="advanced-strategies-grid-container">
            <h2 class="grid-title">Non-Directional Strategies</h2>
            <p class="disclaimer">
                <strong>Disclaimer:</strong> For simplification, all legs in these strategies are simulated as expiring on the same date. In real trading, strategies like Calendars and Diagonals typically involve options with different expiration dates, which introduces time decay and volatility considerations not captured by this simple model.
            </p>
            <div id="advanced-strategy-grid">
                </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
